<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Cobrança - Sistema Completo Final</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .header p {
            color: #64748b;
            font-size: 1.1rem;
        }

        /* Cards de Meta por Carteira */
        .meta-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 40px;
        }

        .meta-section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1e293b;
        }

        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .meta-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }

        .meta-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .meta-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
        }

        .meta-percentage {
            font-size: 1.25rem;
            font-weight: 700;
            color: #3b82f6;
        }

        .meta-values {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.875rem;
            color: #64748b;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            transition: width 0.3s ease;
        }

        /* Ranking de Cobrança */
        .ranking-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 40px;
        }

        .ranking-section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1e293b;
        }

        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .ranking-item.clickable {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .ranking-item.clickable:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            background: #e2e8f0;
        }

        .ranking-position {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .position-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #3b82f6;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .position-number.first {
            background: #f59e0b;
        }

        .position-number.second {
            background: #6b7280;
        }

        .position-number.third {
            background: #cd7c2f;
        }

        .store-name {
            font-weight: 600;
            color: #1e293b;
        }

        .store-value {
            font-weight: 600;
            color: #ef4444;
        }

        /* Estatísticas Gerais */
        .stats-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 40px;
        }

        .stats-section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1e293b;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
        }

        .stat-label {
            font-size: 0.875rem;
            color: #64748b;
            margin-top: 4px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .metric-card.clickable::after {
            content: "Clique para filtrar";
            position: absolute;
            top: 8px;
            right: 12px;
            font-size: 0.75rem;
            color: #64748b;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .metric-card.clickable:hover::after {
            opacity: 1;
        }

        .metric-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .metric-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
        }

        .metric-title {
            font-size: 0.875rem;
            color: #64748b;
            font-weight: 500;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1e293b;
        }

        .metric-subtitle {
            font-size: 0.75rem;
            color: #64748b;
            margin-top: 4px;
        }

        .renegociacoes {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 40px;
        }

        .renegociacoes h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1e293b;
        }

        .renegociacoes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .renegociacao-card {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .renegociacao-card:hover {
            background: #f8fafc;
            transform: translateY(-1px);
        }

        .renegociacao-icon {
            width: 32px;
            height: 32px;
            margin: 0 auto 12px;
        }

        .renegociacao-title {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 8px;
        }

        .renegociacao-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
        }

        .navigation {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: #22c55e;
            color: white;
        }

        .btn-primary:hover {
            background-color: #16a34a;
        }

        .btn-secondary {
            background-color: #3b82f6;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #2563eb;
        }

        .btn-tertiary {
            background-color: #8b5cf6;
            color: white;
        }

        .btn-tertiary:hover {
            background-color: #7c3aed;
        }

        .btn-quaternary {
            background-color: #f59e0b;
            color: white;
        }

        .btn-quaternary:hover {
            background-color: #d97706;
        }

        .charts-section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 40px;
        }

        .charts-section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: #1e293b;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }

        .chart-container {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }

        .chart-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .agenda-section {
            display: none;
        }

        .agenda-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .agenda-title {
            font-size: 2rem;
            font-weight: 600;
            color: #1e293b;
        }

        .agenda-subtitle {
            color: #64748b;
            margin-bottom: 24px;
        }

        .filter-info {
            background: #dbeafe;
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 16px;
            display: none;
        }

        .filter-info.active {
            display: block;
        }

        .filter-info-text {
            color: #1e40af;
            font-weight: 500;
        }

        .clear-filter {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            font-weight: 500;
            margin-left: 8px;
        }

        .search-filter-container {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.875rem;
        }

        .filter-select {
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.875rem;
            background: white;
            min-width: 200px;
        }

        .clients-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            background: #f8fafc;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e2e8f0;
        }

        .table td {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .table tr:hover {
            background: #f8fafc;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-boa {
            background: #dcfce7;
            color: #166534;
        }

        .badge-media {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-baixa {
            background: #fee2e2;
            color: #991b1b;
        }

        .badge-atraso {
            background: #fee2e2;
            color: #991b1b;
        }

        .badge-em-dia {
            background: #dcfce7;
            color: #166534;
        }

        .action-btn {
            background: #6366f1;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75rem;
        }

        .action-btn:hover {
            background: #4f46e5;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 12px;
            padding: 24px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #64748b;
        }

        .close-btn:hover {
            color: #1e293b;
        }

        .client-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .info-section h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: #1e293b;
        }

        .info-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            gap: 8px;
        }

        .info-icon {
            width: 16px;
            height: 16px;
        }

        .info-label {
            font-weight: 500;
            color: #64748b;
            min-width: 120px;
        }

        .info-value {
            color: #1e293b;
        }

        .photos-section {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
        }

        .photos-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 12px;
        }

        .photo-placeholder {
            aspect-ratio: 1;
            background: #e2e8f0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-size: 0.75rem;
            text-align: center;
            border: 2px dashed #cbd5e1;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .photo-placeholder:hover {
            background: #cbd5e1;
        }

        .summary-cards {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
        }

        .summary-card {
            flex: 1;
            text-align: center;
            padding: 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .summary-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .summary-label {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .summary-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
        }

        .summary-info {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 8px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .action-button {
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-pix {
            background: #3b82f6;
            color: white;
        }

        .btn-pix:hover {
            background: #2563eb;
        }

        .btn-boleto {
            background: #22c55e;
            color: white;
        }

        .btn-boleto:hover {
            background: #16a34a;
        }

        .btn-renegociar {
            background: #8b5cf6;
            color: white;
        }

        .btn-renegociar:hover {
            background: #7c3aed;
        }

        .btn-contestar {
            background: #ef4444;
            color: white;
        }

        .btn-contestar:hover {
            background: #dc2626;
        }

        .btn-antecipar {
            background: #f59e0b;
            color: white;
        }

        .btn-antecipar:hover {
            background: #d97706;
        }

        .btn-dar-baixa {
            background: #22c55e;
            color: white;
        }

        .btn-dar-baixa:hover {
            background: #16a34a;
        }

        .btn-historico {
            background: #6b7280;
            color: white;
            grid-column: span 3;
        }

        .btn-historico:hover {
            background: #4b5563;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.875rem;
        }

        .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.875rem;
            min-height: 80px;
            resize: vertical;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .alert {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 16px;
        }

        .alert-warning {
            color: #92400e;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        .btn-cancel {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }

        .btn-cancel:hover {
            background: #e5e7eb;
        }

        .btn-confirm {
            background: #ef4444;
            color: white;
        }

        .btn-confirm:hover {
            background: #dc2626;
        }

        .purchases-section {
            margin-top: 24px;
        }

        .purchases-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .purchases-table th,
        .purchases-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .purchases-table th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
        }

        .purchases-table tr {
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .purchases-table tr:hover {
            background: #f8fafc;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .status-pendente {
            background: #fef3c7;
            color: #92400e;
        }

        .status-pago {
            background: #dcfce7;
            color: #166534;
        }

        .status-renegociada {
            background: #e0e7ff;
            color: #3730a3;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 24px;
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 20px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #3b82f6;
            border: 2px solid white;
            box-shadow: 0 0 0 2px #3b82f6;
        }

        .timeline-date {
            font-size: 0.75rem;
            color: #64748b;
            margin-bottom: 4px;
        }

        .timeline-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .timeline-description {
            font-size: 0.875rem;
            color: #64748b;
        }

        .installments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .installment-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px;
            position: relative;
        }

        .installment-number {
            font-weight: 600;
            color: #1e293b;
        }

        .installment-info {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 4px;
        }

        .installment-status {
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
        }

        .installment-paid {
            background: #dcfce7;
            color: #166534;
        }

        .installment-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .installment-overdue {
            background: #fee2e2;
            color: #991b1b;
        }

        .installment-actions {
            margin-top: 8px;
            display: flex;
            gap: 4px;
        }

        .installment-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-baixa {
            background: #22c55e;
            color: white;
        }

        .btn-baixa:hover {
            background: #16a34a;
        }

        .security-modal .modal-content {
            max-width: 400px;
        }

        .security-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            text-align: center;
            letter-spacing: 2px;
            margin-bottom: 16px;
        }

        .security-input:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .boleto-card {
            background: #f0f9ff;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 20px;
            margin-top: 16px;
            text-align: center;
        }

        .boleto-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 12px;
        }

        .boleto-info {
            color: #1e40af;
            margin-bottom: 8px;
        }

        .boleto-code {
            background: white;
            border: 1px solid #3b82f6;
            border-radius: 6px;
            padding: 8px;
            font-family: monospace;
            font-size: 0.875rem;
            margin: 12px 0;
        }

        .purchase-selection {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .purchase-selection h4 {
            margin-bottom: 12px;
            color: #1e293b;
        }

        .purchase-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .purchase-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .purchase-item:hover {
            background: #f1f5f9;
        }

        .purchase-item.selected {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .parcela-selection {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .parcela-selection h4 {
            margin-bottom: 12px;
            color: #1e293b;
        }

        .parcela-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .parcela-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .parcela-item:hover {
            background: #f1f5f9;
        }

        .parcela-item.selected {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .parcela-info {
            flex: 1;
        }

        .parcela-valor {
            font-weight: 600;
            color: #1e293b;
        }

        .parcela-vencimento {
            font-size: 0.875rem;
            color: #64748b;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .search-filter-container {
                flex-direction: column;
            }

            .search-input {
                min-width: auto;
            }

            .client-info {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .summary-cards {
                flex-direction: column;
            }

            .agenda-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .navigation {
                justify-content: flex-start;
            }

            .photos-grid {
                grid-template-columns: 1fr;
            }

            .meta-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard-section">
            <div class="header">
                <h1>Dashboard de Cobrança</h1>
                <p>Visão geral dos recebimentos e cobranças</p>
            </div>

            <!-- Cards de Meta por Carteira -->
            <div class="meta-section">
                <h2>Meta por Carteira</h2>
                <div class="meta-grid">
                    <div class="meta-card">
                        <div class="meta-header">
                            <div class="meta-title">Recebimento Atual</div>
                            <div class="meta-percentage">56.4%</div>
                        </div>
                        <div class="meta-values">
                            <span>Recebido: R$ 679.000,00</span>
                            <span>Meta: R$ 1.202.702,00</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 56.4%"></div>
                        </div>
                    </div>

                    <div class="meta-card">
                        <div class="meta-header">
                            <div class="meta-title">Recebimento do Ano</div>
                            <div class="meta-percentage">78.2%</div>
                        </div>
                        <div class="meta-values">
                            <span>Recebido: R$ 8.450.000,00</span>
                            <span>Meta: R$ 10.800.000,00</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 78.2%"></div>
                        </div>
                    </div>

                    <div class="meta-card">
                        <div class="meta-header">
                            <div class="meta-title">Recebimento +1 Ano</div>
                            <div class="meta-percentage">23.8%</div>
                        </div>
                        <div class="meta-values">
                            <span>Recebido: R$ 285.000,00</span>
                            <span>Meta: R$ 1.200.000,00</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 23.8%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ranking de Cobrança -->
            <div class="ranking-section">
                <h2>Ranking de Cobrança - Lojas com Mais a Receber Hoje</h2>
                <div class="ranking-list">
                    <div class="ranking-item clickable" onclick="filterByStore('Loja Centro')">
                        <div class="ranking-position">
                            <div class="position-number first">1</div>
                            <div class="store-name">Loja Centro</div>
                        </div>
                        <div class="store-value">R$ 45.200,00</div>
                    </div>
                    <div class="ranking-item clickable" onclick="filterByStore('Loja Shopping Norte')">
                        <div class="ranking-position">
                            <div class="position-number second">2</div>
                            <div class="store-name">Loja Shopping Norte</div>
                        </div>
                        <div class="store-value">R$ 32.800,00</div>
                    </div>
                    <div class="ranking-item clickable" onclick="filterByStore('Loja Zona Sul')">
                        <div class="ranking-position">
                            <div class="position-number third">3</div>
                            <div class="store-name">Loja Zona Sul</div>
                        </div>
                        <div class="store-value">R$ 28.500,00</div>
                    </div>
                    <div class="ranking-item clickable" onclick="filterByStore('Loja Oeste')">
                        <div class="ranking-position">
                            <div class="position-number">4</div>
                            <div class="store-name">Loja Oeste</div>
                        </div>
                        <div class="store-value">R$ 19.300,00</div>
                    </div>
                    <div class="ranking-item clickable" onclick="filterByStore('Loja Express')">
                        <div class="ranking-position">
                            <div class="position-number">5</div>
                            <div class="store-name">Loja Express</div>
                        </div>
                        <div class="store-value">R$ 15.600,00</div>
                    </div>
                </div>
            </div>

            <!-- Estatísticas Gerais -->
            <div class="stats-section">
                <h2>Estatísticas Gerais</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">156</div>
                        <div class="stat-label">Total de Clientes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">Taxa de Recebimento do Mês</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">80%</div>
                        <div class="stat-label">Inadimplência da Carteira</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">150</div>
                        <div class="stat-label">Total de Parcelas</div>
                    </div>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-card clickable" onclick="filterByCard('a-receber-mes')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #3b82f6;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <span class="metric-title">A Receber do Mês</span>
                    </div>
                    <div class="metric-value">R$ 125.000,00</div>
                    <div class="metric-subtitle">15 clientes pendentes</div>
                </div>

                <div class="metric-card clickable" onclick="filterByCard('a-receber-dia')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #22c55e;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        <span class="metric-title">A Receber do Dia</span>
                    </div>
                    <div class="metric-value">R$ 8.500,00</div>
                    <div class="metric-subtitle">3 clientes vencendo hoje</div>
                </div>

                <div class="metric-card clickable" onclick="filterByCard('recebido-dia')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #10b981;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="metric-title">Recebido do Dia</span>
                    </div>
                    <div class="metric-value">R$ 12.300,00</div>
                    <div class="metric-subtitle">5 pagamentos confirmados</div>
                </div>

                <div class="metric-card clickable" onclick="filterByCard('atrasado')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #ef4444;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        <span class="metric-title">A Receber Atrasado</span>
                    </div>
                    <div class="metric-value">R$ 45.000,00</div>
                    <div class="metric-subtitle">8 clientes em atraso</div>
                </div>

                <div class="metric-card clickable" onclick="filterByCard('recebido-atrasado-geral')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #f59e0b;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        <span class="metric-title">Recebido Atrasado Geral</span>
                    </div>
                    <div class="metric-value">R$ 78.000,00</div>
                    <div class="metric-subtitle">Histórico de recuperação</div>
                </div>

                <div class="metric-card clickable" onclick="filterByCard('recebido-atrasado-mes')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #8b5cf6;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        <span class="metric-title">Recebido Atrasado Mês</span>
                    </div>
                    <div class="metric-value">R$ 15.000,00</div>
                    <div class="metric-subtitle">Recuperação mensal</div>
                </div>

                <div class="metric-card clickable" onclick="filterByCard('recebido-atrasado-dia')">
                    <div class="metric-header">
                        <svg class="metric-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #06b6d4;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="metric-title">Recebido Atrasado no Dia</span>
                    </div>
                    <div class="metric-value">R$ 3.200,00</div>
                    <div class="metric-subtitle">Recuperação diária</div>
                </div>
            </div>

            <div class="renegociacoes">
                <h2>Renegociações</h2>
                <div class="renegociacoes-grid">
                    <div class="renegociacao-card" onclick="filterByCard('renegociacoes-feitas')">
                        <svg class="renegociacao-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #3b82f6;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="renegociacao-title">Renegociações Feitas</div>
                        <div class="renegociacao-value">23</div>
                    </div>

                    <div class="renegociacao-card" onclick="filterByCard('renegociacoes-quebradas')">
                        <svg class="renegociacao-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #ef4444;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        <div class="renegociacao-title">Renegociações Quebradas</div>
                        <div class="renegociacao-value">5</div>
                    </div>

                    <div class="renegociacao-card" onclick="filterByCard('renegociacoes-para-receber')">
                        <svg class="renegociacao-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #f59e0b;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        <div class="renegociacao-title">Para Receber Hoje</div>
                        <div class="renegociacao-value">R$ 18.500,00</div>
                    </div>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-primary" onclick="showAgenda()">Agenda de Clientes</button>
                <button class="btn btn-secondary" onclick="toggleCharts()">Mostrar Gráficos</button>
            </div>

            <!-- Charts Section -->
            <div id="charts-section" class="charts-section">
                <h2>Gráficos de Recebimentos</h2>
                <div class="charts-grid">
                    <div class="chart-container">
                        <div class="chart-title">Recebimentos Mensais</div>
                        <canvas id="monthlyChart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title">Status de Pagamentos</div>
                        <canvas id="statusChart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-container">
                        <div class="chart-title">Recebimentos dos Últimos 7 Dias</div>
                        <canvas id="weeklyChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Agenda Section -->
        <div id="agenda-section" class="agenda-section">
            <div class="agenda-header">
                <div>
                    <h1 class="agenda-title">Agenda de Clientes</h1>
                    <p class="agenda-subtitle">Gerencie seus clientes e cobranças</p>
                </div>
                <button class="btn btn-secondary" onclick="showDashboard()">← Voltar ao Dashboard</button>
            </div>

            <div id="filter-info" class="filter-info">
                <span id="filter-info-text" class="filter-info-text"></span>
                <button class="clear-filter" onclick="clearFilter()">Limpar filtro</button>
            </div>

            <div class="search-filter-container">
                <input type="text" class="search-input" placeholder="Buscar por nome, CPF ou duplicata..." id="search-input">
                <select class="filter-select" id="filter-select">
                    <option value="">Todos os clientes</option>
                    <option value="1-parcela">1 parcela em atraso</option>
                    <option value="2-parcelas">2 parcelas em atraso</option>
                    <option value="3-parcelas">3+ parcelas em atraso</option>
                    <option value="em-dia">Em dia</option>
                    <option value="atrasado-ano">Atrasado do ano</option>
                    <option value="atrasado-antigo">Atrasado +1 ano</option>
                </select>
                <select class="filter-select" id="probability-filter">
                    <option value="">Todas probabilidades</option>
                    <option value="boa">Boa probabilidade</option>
                    <option value="media">Média probabilidade</option>
                    <option value="baixa">Baixa probabilidade</option>
                </select>
            </div>

            <div class="clients-table">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>CPF</th>
                            <th>Dias Atraso</th>
                            <th>Duplicata</th>
                            <th>Probabilidade</th>
                            <th>Valor Devendo</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="clients-tbody">
                        <!-- Clientes serão inseridos aqui via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Cliente -->
    <div id="client-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Detalhes do Cliente</h2>
                <button class="close-btn" onclick="closeModal('client-modal')">&times;</button>
            </div>

            <div class="client-info">
                <div class="info-section">
                    <h3>Informações Pessoais</h3>
                    <div class="info-item">
                        <span class="info-label">Nome:</span>
                        <span class="info-value" id="client-name"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">CPF:</span>
                        <span class="info-value" id="client-cpf"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Email:</span>
                        <span class="info-value" id="client-email"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Celular:</span>
                        <span class="info-value" id="client-phone"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Celular Referência:</span>
                        <span class="info-value" id="client-ref-phone"></span>
                    </div>
                </div>

                <div class="info-section">
                    <h3>Resumo Financeiro</h3>
                    <div class="summary-cards">
                        <div class="summary-card">
                            <div class="summary-number" id="client-purchases">0</div>
                            <div class="summary-label">Compras</div>
                            <div class="summary-value" id="client-debt">R$ 0,00</div>
                            <div class="summary-label">Devendo</div>
                            <div class="summary-info">
                                <div>Probabilidade: <span id="client-probability"></span></div>
                                <div>Parcelas em Atraso: <span id="client-overdue-installments"></span></div>
                                <div>Status: <span id="client-status"></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-section photos-section">
                    <h3>Documentos</h3>
                    <div class="photos-grid">
                        <div class="photo-placeholder">
                            <div>+<br>Foto Selfie</div>
                        </div>
                        <div class="photo-placeholder">
                            <div>+<br>Doc. Frente</div>
                        </div>
                        <div class="photo-placeholder">
                            <div>+<br>Doc. Verso</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="action-button btn-pix" onclick="selectPurchaseForAction('pix')">Gerar PIX</button>
                <button class="action-button btn-boleto" onclick="selectPurchaseForAction('boleto')">Gerar Boleto</button>
                <button class="action-button btn-renegociar" onclick="selectPurchaseForAction('renegociar')">Renegociar</button>
                <button class="action-button btn-contestar" onclick="selectPurchaseForAction('contestar')">Contestar</button>
                <button class="action-button btn-antecipar" onclick="selectPurchaseForAction('antecipar')">Antecipar</button>
                <button class="action-button btn-dar-baixa" onclick="selectPurchaseForAction('dar-baixa')">Dar Baixa</button>
                <button class="action-button btn-historico" onclick="showMovementHistory()">Histórico de Movimentações</button>
            </div>

            <div class="purchases-section">
                <h3>Histórico de Compras</h3>
                <table class="purchases-table">
                    <thead>
                        <tr>
                            <th>Duplicata</th>
                            <th>Valor Compra</th>
                            <th>QTD Parcela</th>
                            <th>Data Compra</th>
                            <th>Empresa</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="purchases-tbody">
                        <!-- Compras serão inseridas aqui via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal de Seleção de Compra -->
    <div id="purchase-selection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Selecionar Compra</h2>
                <button class="close-btn" onclick="closeModal('purchase-selection-modal')">&times;</button>
            </div>

            <div class="purchase-selection">
                <h4>Selecione a compra para realizar a ação:</h4>
                <div class="purchase-list" id="purchase-list">
                    <!-- Compras serão inseridas aqui via JavaScript -->
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('purchase-selection-modal')">Cancelar</button>
                <button class="btn btn-confirm" onclick="proceedWithSelectedPurchase()">Continuar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Seleção de Parcelas -->
    <div id="parcela-selection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Selecionar Parcelas</h2>
                <button class="close-btn" onclick="closeModal('parcela-selection-modal')">&times;</button>
            </div>

            <div class="parcela-selection">
                <h4 id="parcela-selection-title">Selecione as parcelas:</h4>
                <div class="parcela-list" id="parcela-list">
                    <!-- Parcelas serão inseridas aqui via JavaScript -->
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('parcela-selection-modal')">Cancelar</button>
                <button class="btn btn-confirm" onclick="proceedWithSelectedParcelas()">Continuar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Renegociação -->
    <div id="renegociation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Renegociar Dívida</h2>
                <button class="close-btn" onclick="closeModal('renegociation-modal')">&times;</button>
            </div>

            <div class="alert alert-warning">
                <strong>ATENÇÃO:</strong> Esta duplicata possui outras parcelas vencidas há mais de 90 dias, que foram automaticamente adicionadas a esta renegociação.
            </div>

            <div class="form-group">
                <label class="form-label">Probabilidade de Pagamento</label>
                <div style="color: #ef4444; font-weight: 600;">NÃO</div>
            </div>

            <div class="form-group">
                <label class="form-label">Valor Original</label>
                <div style="font-weight: 600;">R$ 15.000,00</div>
            </div>

            <div class="form-group">
                <label class="form-label">Valor com Juros (15%)</label>
                <div style="font-weight: 600; color: #ef4444;">R$ 17.250,00</div>
            </div>

            <div class="form-group">
                <label class="form-label">Valor da Entrada</label>
                <input type="number" class="form-input" id="entrada-value" placeholder="0,00" oninput="calculateRenegotiation()">
            </div>

            <div class="form-group">
                <label class="form-label">Data da Entrada</label>
                <input type="date" class="form-input" id="entrada-date">
            </div>

            <div class="form-group">
                <label class="form-label">Número de Parcelas</label>
                <select class="form-input" id="parcelas-count" onchange="calculateRenegotiation()">
                    <option value="1">1x</option>
                    <option value="2">2x</option>
                    <option value="3">3x</option>
                    <option value="4">4x</option>
                    <option value="5">5x</option>
                    <option value="6">6x</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Observações</label>
                <textarea class="form-textarea" placeholder="Observações sobre a renegociação..."></textarea>
            </div>

            <div class="form-group">
                <h4>Resumo da Renegociação</h4>
                <div>Entrada: R$ <span id="resumo-entrada">0,00</span></div>
                <div>Parcelas: <span id="resumo-parcelas">1x de R$ 17.250,00</span></div>
                <div>Total: R$ <span id="resumo-total">17.250,00</span></div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('renegociation-modal')">Cancelar</button>
                <button class="btn btn-confirm" onclick="confirmRenegotiation()">Confirmar Renegociação</button>
            </div>
        </div>
    </div>

    <!-- Modal de Contestação -->
    <div id="contestation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Contestar Cliente</h2>
                <button class="close-btn" onclick="closeModal('contestation-modal')">&times;</button>
            </div>

            <div class="form-group">
                <label class="form-label">Motivo da Contestação</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" name="contestation-reason" value="numero-errado" id="numero-errado">
                        <label for="numero-errado">Número errado</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="contestation-reason" value="nao-comprou" id="nao-comprou">
                        <label for="nao-comprou">Cliente não comprou</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="contestation-reason" value="fraude" id="fraude">
                        <label for="fraude">Possível fraude</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="contestation-reason" value="faleceu" id="faleceu">
                        <label for="faleceu">Cliente faleceu</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="contestation-reason" value="outros" id="outros">
                        <label for="outros">Outros</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Observações</label>
                <textarea class="form-textarea" placeholder="Descreva os detalhes da contestação..."></textarea>
            </div>

            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('contestation-modal')">Cancelar</button>
                <button class="btn btn-confirm" onclick="confirmContestation()">Confirmar Contestação</button>
            </div>
        </div>
    </div>

    <!-- Modal de Histórico de Movimentações -->
    <div id="movement-history-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Histórico de Movimentações</h2>
                <button class="close-btn" onclick="closeModal('movement-history-modal')">&times;</button>
            </div>

            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">15/01/2024</div>
                    <div class="timeline-title">Compra Realizada</div>
                    <div class="timeline-description">Cliente realizou compra no valor de R$ 15.000,00 em 3x</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">15/02/2024</div>
                    <div class="timeline-title">1ª Parcela Paga</div>
                    <div class="timeline-description">Pagamento de R$ 5.000,00 recebido em 14/02/2024</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">15/03/2024</div>
                    <div class="timeline-title">2ª Parcela Paga</div>
                    <div class="timeline-description">Pagamento de R$ 5.000,00 recebido em 16/03/2024</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">15/04/2024</div>
                    <div class="timeline-title">3ª Parcela Vencida</div>
                    <div class="timeline-description">Parcela de R$ 5.000,00 venceu e não foi paga</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">20/04/2024</div>
                    <div class="timeline-title">Primeiro Contato</div>
                    <div class="timeline-description">Cobradora entrou em contato via telefone</div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">25/04/2024</div>
                    <div class="timeline-title">Segundo Contato</div>
                    <div class="timeline-description">Cliente prometeu pagamento para 30/04/2024</div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('movement-history-modal')">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes da Compra -->
    <div id="purchase-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Detalhes da Compra</h2>
                <button class="close-btn" onclick="closeModal('purchase-details-modal')">&times;</button>
            </div>

            <div id="purchase-details-content">
                <!-- Conteúdo será inserido via JavaScript -->
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('purchase-details-modal')">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Segurança -->
    <div id="security-modal" class="modal security-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Senha de Segurança</h2>
                <button class="close-btn" onclick="closeModal('security-modal')">&times;</button>
            </div>

            <div class="form-group">
                <label class="form-label">Digite a senha de segurança para dar baixa nas parcelas selecionadas:</label>
                <input type="password" class="security-input" placeholder="••••••" maxlength="6" id="security-password">
            </div>

            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal('security-modal')">Cancelar</button>
                <button class="btn btn-confirm" onclick="confirmSecurity()">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Boleto Gerado -->
    <div id="boleto-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Boleto Gerado com Sucesso</h2>
                <button class="close-btn" onclick="closeModal('boleto-modal')">&times;</button>
            </div>

            <div class="boleto-card">
                <div class="boleto-title">Boleto Bancário</div>
                <div class="boleto-info">Valor: R$ 17.250,00</div>
                <div class="boleto-info">Vencimento: <span id="boleto-vencimento"></span></div>
                <div class="boleto-code">34191.79001 01043.510047 91020.150008 1 84560000017250</div>
                <div class="boleto-info">Código de barras gerado automaticamente</div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('boleto-modal')">Fechar</button>
                <button class="btn btn-primary" onclick="printBoleto()">Imprimir Boleto</button>
            </div>
        </div>
    </div>

    <script>
        // Dados mockados dos clientes
        const clientsData = [
            {
                id: 1,
                name: "João Silva",
                cpf: "123.456.789-00",
                email: "joao@techsolutions.com",
                phone: "(11) 99999-9999",
                refPhone: "(11) 88888-8888",
                daysOverdue: 15,
                duplicata: "DUP001",
                probability: "boa",
                debt: 15000,
                status: "atrasado",
                purchases: [
                    {
                        duplicata: "DUP001",
                        value: 15000,
                        installments: 3,
                        date: "15/01/2024",
                        company: "Tech Solutions",
                        status: "pendente",
                        parcelas: [
                            { number: 1, value: 5000, dueDate: "15/02/2024", status: "pago", paidDate: "14/02/2024" },
                            { number: 2, value: 5000, dueDate: "15/03/2024", status: "pago", paidDate: "16/03/2024" },
                            { number: 3, value: 5000, dueDate: "15/04/2024", status: "pendente", paidDate: null }
                        ]
                    },
                    {
                        duplicata: "DUP004",
                        value: 8500,
                        installments: 2,
                        date: "20/02/2024",
                        company: "Tech Solutions",
                        status: "pago",
                        parcelas: [
                            { number: 1, value: 4250, dueDate: "20/03/2024", status: "pago", paidDate: "19/03/2024" },
                            { number: 2, value: 4250, dueDate: "20/04/2024", status: "pago", paidDate: "20/04/2024" }
                        ]
                    }
                ]
            },
            {
                id: 2,
                name: "Maria Santos",
                cpf: "987.654.321-00",
                email: "maria@inovacao.com",
                phone: "(11) 88888-8888",
                refPhone: "(11) 77777-7777",
                daysOverdue: 45,
                duplicata: "DUP002",
                probability: "media",
                debt: 25000,
                status: "atrasado",
                purchases: [
                    {
                        duplicata: "DUP002",
                        value: 25000,
                        installments: 5,
                        date: "10/01/2024",
                        company: "Inovação Ltda",
                        status: "pendente",
                        parcelas: [
                            { number: 1, value: 5000, dueDate: "10/02/2024", status: "pago", paidDate: "10/02/2024" },
                            { number: 2, value: 5000, dueDate: "10/03/2024", status: "pendente", paidDate: null },
                            { number: 3, value: 5000, dueDate: "10/04/2024", status: "pendente", paidDate: null },
                            { number: 4, value: 5000, dueDate: "10/05/2024", status: "pendente", paidDate: null },
                            { number: 5, value: 5000, dueDate: "10/06/2024", status: "pendente", paidDate: null }
                        ]
                    }
                ]
            },
            {
                id: 3,
                name: "Carlos Oliveira",
                cpf: "456.789.123-00",
                email: "carlos@digital.com",
                phone: "(11) 77777-7777",
                refPhone: "(11) 66666-6666",
                daysOverdue: 120,
                duplicata: "DUP003",
                probability: "baixa",
                debt: 35000,
                status: "atrasado",
                purchases: [
                    {
                        duplicata: "DUP003",
                        value: 35000,
                        installments: 4,
                        date: "05/12/2023",
                        company: "Digital Corp",
                        status: "pendente",
                        parcelas: [
                            { number: 1, value: 8750, dueDate: "05/01/2024", status: "pendente", paidDate: null },
                            { number: 2, value: 8750, dueDate: "05/02/2024", status: "pendente", paidDate: null },
                            { number: 3, value: 8750, dueDate: "05/03/2024", status: "pendente", paidDate: null },
                            { number: 4, value: 8750, dueDate: "05/04/2024", status: "pendente", paidDate: null }
                        ]
                    }
                ]
            },
            {
                id: 4,
                name: "Ana Costa",
                cpf: "654.321.987-00",
                email: "ana@startup.com",
                phone: "(11) 66666-6666",
                refPhone: "(11) 55555-5555",
                daysOverdue: 7,
                duplicata: "DUP006",
                probability: "boa",
                debt: 18000,
                status: "atrasado",
                purchases: [
                    {
                        duplicata: "DUP006",
                        value: 18000,
                        installments: 3,
                        date: "01/04/2024",
                        company: "Startup Inc",
                        status: "pendente",
                        parcelas: [
                            { number: 1, value: 6000, dueDate: "01/05/2024", status: "pago", paidDate: "30/04/2024" },
                            { number: 2, value: 6000, dueDate: "01/06/2024", status: "pendente", paidDate: null },
                            { number: 3, value: 6000, dueDate: "01/07/2024", status: "pendente", paidDate: null }
                        ]
                    }
                ]
            },
            {
                id: 5,
                name: "Pedro Almeida",
                cpf: "321.654.987-00",
                email: "pedro@empresa.com",
                phone: "(11) 55555-5555",
                refPhone: "(11) 44444-4444",
                daysOverdue: 0,
                duplicata: "DUP005",
                probability: "boa",
                debt: 12000,
                status: "em-dia",
                purchases: [
                    {
                        duplicata: "DUP005",
                        value: 12000,
                        installments: 2,
                        date: "15/03/2024",
                        company: "Empresa XYZ",
                        status: "pendente",
                        parcelas: [
                            { number: 1, value: 6000, dueDate: "15/04/2024", status: "pago", paidDate: "15/04/2024" },
                            { number: 2, value: 6000, dueDate: "15/05/2024", status: "pendente", paidDate: null }
                        ]
                    }
                ]
            }
        ];

        // Variáveis globais
        let currentFilter = '';
        let currentStoreFilter = '';
        let currentClient = null;
        let currentAction = '';
        let selectedPurchase = null;
        let selectedParcelas = [];

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            renderClients();
            setupEventListeners();
            drawCharts();
        });

        function setupEventListeners() {
            document.getElementById('search-input').addEventListener('input', filterClients);
            document.getElementById('filter-select').addEventListener('change', filterClients);
            document.getElementById('probability-filter').addEventListener('change', filterClients);
        }

        // Navegação entre seções
        function showDashboard() {
            document.getElementById('dashboard-section').style.display = 'block';
            document.getElementById('agenda-section').style.display = 'none';
        }

        function showAgenda() {
            document.getElementById('dashboard-section').style.display = 'none';
            document.getElementById('agenda-section').style.display = 'block';
        }

        function toggleCharts() {
            const chartsSection = document.getElementById('charts-section');
            if (chartsSection.style.display === 'none' || chartsSection.style.display === '') {
                chartsSection.style.display = 'block';
                drawCharts();
            } else {
                chartsSection.style.display = 'none';
            }
        }

        // Filtros por cards
        function filterByCard(cardType) {
            currentFilter = cardType;
            showAgenda();
            
            const filterInfo = document.getElementById('filter-info');
            const filterText = document.getElementById('filter-info-text');
            
            let filterMessage = '';
            
            switch(cardType) {
                case 'a-receber-mes':
                    filterMessage = 'Mostrando clientes com parcelas a receber no mês';
                    break;
                case 'a-receber-dia':
                    filterMessage = 'Mostrando clientes com parcelas vencendo hoje';
                    break;
                case 'recebido-dia':
                    filterMessage = 'Mostrando clientes que pagaram hoje';
                    break;
                case 'atrasado':
                    filterMessage = 'Mostrando clientes em atraso';
                    break;
                case 'recebido-atrasado-geral':
                    filterMessage = 'Mostrando histórico de recebimentos atrasados';
                    break;
                case 'recebido-atrasado-mes':
                    filterMessage = 'Mostrando recebimentos atrasados do mês';
                    break;
                case 'recebido-atrasado-dia':
                    filterMessage = 'Mostrando recebimentos atrasados do dia';
                    break;
                case 'renegociacoes-feitas':
                    filterMessage = 'Mostrando clientes com renegociações feitas';
                    break;
                case 'renegociacoes-quebradas':
                    filterMessage = 'Mostrando clientes com renegociações quebradas';
                    break;
                case 'renegociacoes-para-receber':
                    filterMessage = 'Mostrando renegociações para receber hoje';
                    break;
            }
            
            filterText.textContent = filterMessage;
            filterInfo.classList.add('active');
            renderClients();
        }

        // Filtro por loja
        function filterByStore(storeName) {
            currentStoreFilter = storeName;
            showAgenda();
            
            const filterInfo = document.getElementById('filter-info');
            const filterText = document.getElementById('filter-info-text');
            
            filterText.textContent = `Mostrando clientes da ${storeName}`;
            filterInfo.classList.add('active');
            renderClients();
        }

        // Limpar filtros
        function clearFilter() {
            currentFilter = '';
            currentStoreFilter = '';
            document.getElementById('filter-info').classList.remove('active');
            document.getElementById('search-input').value = '';
            document.getElementById('filter-select').value = '';
            document.getElementById('probability-filter').value = '';
            renderClients();
        }

        // Renderizar clientes
        function renderClients() {
            const tbody = document.getElementById('clients-tbody');
            tbody.innerHTML = '';
            
            let filteredClients = clientsData.filter(client => {
                // Filtro por busca
                const searchTerm = document.getElementById('search-input').value.toLowerCase();
                if (searchTerm && !client.name.toLowerCase().includes(searchTerm) && 
                    !client.cpf.includes(searchTerm) && !client.duplicata.toLowerCase().includes(searchTerm)) {
                    return false;
                }
                
                // Filtro por categoria
                const categoryFilter = document.getElementById('filter-select').value;
                if (categoryFilter) {
                    switch(categoryFilter) {
                        case '1-parcela':
                            if (client.daysOverdue < 1 || client.daysOverdue > 30) return false;
                            break;
                        case '2-parcelas':
                            if (client.daysOverdue < 31 || client.daysOverdue > 60) return false;
                            break;
                        case '3-parcelas':
                            if (client.daysOverdue < 61) return false;
                            break;
                        case 'em-dia':
                            if (client.daysOverdue > 0) return false;
                            break;
                        case 'atrasado-ano':
                            if (client.daysOverdue < 1 || client.daysOverdue > 365) return false;
                            break;
                        case 'atrasado-antigo':
                            if (client.daysOverdue <= 365) return false;
                            break;
                    }
                }
                
                // Filtro por probabilidade
                const probabilityFilter = document.getElementById('probability-filter').value;
                if (probabilityFilter && client.probability !== probabilityFilter) {
                    return false;
                }
                
                // Filtro por card
                if (currentFilter) {
                    switch(currentFilter) {
                        case 'atrasado':
                            if (client.daysOverdue === 0) return false;
                            break;
                        case 'a-receber-dia':
                            // Simular clientes vencendo hoje
                            if (![4, 5].includes(client.id)) return false;
                            break;
                        // Adicionar outros filtros conforme necessário
                    }
                }
                
                // Filtro por loja
                if (currentStoreFilter) {
                    // Como não temos dados de loja nos clientes mockados, 
                    // vamos simular que não há clientes para essa loja específica
                    return false;
                }
                
                return true;
            });
            
            filteredClients.forEach(client => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${client.name}</td>
                    <td>${client.cpf}</td>
                    <td><span class="badge badge-atraso">${client.daysOverdue} DIAS</span></td>
                    <td>${client.duplicata}</td>
                    <td><span class="badge badge-${client.probability}">${client.probability.toUpperCase()}</span></td>
                    <td>R$ ${client.debt.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td><span class="badge badge-${client.status === 'em-dia' ? 'em-dia' : 'atraso'}">${client.status.toUpperCase()}</span></td>
                    <td><button class="action-btn" onclick="showClientDetails(${client.id})">⋯</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        // Filtrar clientes
        function filterClients() {
            renderClients();
        }

        // Mostrar detalhes do cliente
        function showClientDetails(clientId) {
            currentClient = clientsData.find(c => c.id === clientId);
            if (!currentClient) return;
            
            // Preencher informações pessoais
            document.getElementById('client-name').textContent = currentClient.name;
            document.getElementById('client-cpf').textContent = currentClient.cpf;
            document.getElementById('client-email').textContent = currentClient.email;
            document.getElementById('client-phone').textContent = currentClient.phone;
            document.getElementById('client-ref-phone').textContent = currentClient.refPhone;
            
            // Preencher resumo financeiro
            document.getElementById('client-purchases').textContent = currentClient.purchases.length;
            document.getElementById('client-debt').textContent = `R$ ${currentClient.debt.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('client-probability').textContent = currentClient.probability.charAt(0).toUpperCase() + currentClient.probability.slice(1);
            
            // Calcular parcelas em atraso
            let parcelasEmAtraso = 0;
            currentClient.purchases.forEach(purchase => {
                purchase.parcelas.forEach(parcela => {
                    if (parcela.status === 'pendente') {
                        const vencimento = new Date(parcela.dueDate.split('/').reverse().join('-'));
                        const hoje = new Date();
                        if (vencimento < hoje) {
                            parcelasEmAtraso++;
                        }
                    }
                });
            });
            
            document.getElementById('client-overdue-installments').textContent = `${parcelasEmAtraso} parcelas`;
            
            // Determinar status do cliente
            let statusCliente = 'Atual (vencendo no mês)';
            if (currentClient.daysOverdue > 365) {
                statusCliente = 'Atrasado +Antigo (anos anteriores)';
            } else if (currentClient.daysOverdue > 45) {
                statusCliente = 'Atrasado do Ano (janeiro a 45 dias)';
            }
            
            document.getElementById('client-status').textContent = statusCliente;
            
            // Preencher histórico de compras
            const purchasesTbody = document.getElementById('purchases-tbody');
            purchasesTbody.innerHTML = '';
            
            currentClient.purchases.forEach(purchase => {
                const row = document.createElement('tr');
                row.onclick = () => showPurchaseDetails(purchase);
                row.style.cursor = 'pointer';
                row.innerHTML = `
                    <td>${purchase.duplicata}</td>
                    <td>R$ ${purchase.value.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>${purchase.installments}x</td>
                    <td>${purchase.date}</td>
                    <td>${purchase.company}</td>
                    <td><span class="status-badge status-${purchase.status}">${purchase.status}</span></td>
                `;
                purchasesTbody.appendChild(row);
            });
            
            document.getElementById('client-modal').style.display = 'block';
        }

        // Mostrar detalhes da compra
        function showPurchaseDetails(purchase) {
            const content = document.getElementById('purchase-details-content');
            content.innerHTML = `
                <h3>Compra ${purchase.duplicata}</h3>
                <p><strong>Valor Total:</strong> R$ ${purchase.value.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                <p><strong>Data da Compra:</strong> ${purchase.date}</p>
                <p><strong>Empresa:</strong> ${purchase.company}</p>
                <p><strong>Status:</strong> ${purchase.status}</p>
                
                <h4>Detalhes das Parcelas</h4>
                <div class="installments-grid">
                    ${purchase.parcelas.map(parcela => `
                        <div class="installment-card">
                            <div class="installment-number">Parcela ${parcela.number}</div>
                            <div class="installment-info">Valor: R$ ${parcela.value.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                            <div class="installment-info">Vencimento: ${parcela.dueDate}</div>
                            ${parcela.paidDate ? `<div class="installment-info">Pago em: ${parcela.paidDate}</div>` : ''}
                            <div class="installment-status installment-${parcela.status}">${parcela.status.toUpperCase()}</div>
                            ${parcela.status === 'pendente' ? `
                                <div class="installment-actions">
                                    <button class="installment-btn btn-baixa" onclick="darBaixaParcela(${parcela.number})">Dar Baixa</button>
                                </div>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
            
            document.getElementById('purchase-details-modal').style.display = 'block';
        }

        // Dar baixa em parcela individual
        function darBaixaParcela(parcelaNumber) {
            document.getElementById('purchase-details-modal').style.display = 'none';
            document.getElementById('security-modal').style.display = 'block';
        }

        // Seleção de compra para ações
        function selectPurchaseForAction(action) {
            currentAction = action;
            
            if (action === 'dar-baixa' || action === 'renegociar' || action === 'antecipar') {
                // Para essas ações, mostrar seleção de compra primeiro
                showPurchaseSelection();
            } else {
                // Para outras ações, mostrar seleção de compra diretamente
                showPurchaseSelection();
            }
        }

        function showPurchaseSelection() {
            const purchaseList = document.getElementById('purchase-list');
            purchaseList.innerHTML = '';
            
            currentClient.purchases.forEach((purchase, index) => {
                const item = document.createElement('div');
                item.className = 'purchase-item';
                item.onclick = () => selectPurchase(index);
                item.innerHTML = `
                    <input type="radio" name="purchase" value="${index}">
                    <div>
                        <strong>${purchase.duplicata}</strong> - R$ ${purchase.value.toLocaleString('pt-BR', {minimumFractionDigits: 2})} (${purchase.installments}x) - ${purchase.company}
                        <br><small>Data: ${purchase.date} | Status: ${purchase.status}</small>
                    </div>
                `;
                purchaseList.appendChild(item);
            });
            
            document.getElementById('client-modal').style.display = 'none';
            document.getElementById('purchase-selection-modal').style.display = 'block';
        }

        function selectPurchase(index) {
            selectedPurchase = currentClient.purchases[index];
            
            // Marcar como selecionado
            document.querySelectorAll('.purchase-item').forEach(item => item.classList.remove('selected'));
            document.querySelectorAll('.purchase-item')[index].classList.add('selected');
            document.querySelectorAll('input[name="purchase"]')[index].checked = true;
        }

        function proceedWithSelectedPurchase() {
            if (!selectedPurchase) {
                alert('Por favor, selecione uma compra.');
                return;
            }
            
            document.getElementById('purchase-selection-modal').style.display = 'none';
            
            if (currentAction === 'dar-baixa' || currentAction === 'renegociar' || currentAction === 'antecipar') {
                showParcelaSelection();
            } else if (currentAction === 'pix') {
                alert('PIX gerado com sucesso!');
            } else if (currentAction === 'boleto') {
                alert('Boleto gerado com sucesso!');
            } else if (currentAction === 'contestar') {
                showContestationModal();
            }
        }

        function showParcelaSelection() {
            const parcelaList = document.getElementById('parcela-list');
            parcelaList.innerHTML = '';
            
            const title = document.getElementById('parcela-selection-title');
            if (currentAction === 'dar-baixa') {
                title.textContent = 'Selecione uma ou mais parcelas para dar baixa:';
            } else if (currentAction === 'renegociar') {
                title.textContent = 'Selecione as parcelas para renegociar:';
            } else if (currentAction === 'antecipar') {
                title.textContent = 'Selecione as parcelas para antecipar:';
            }
            
            selectedPurchase.parcelas.forEach((parcela, index) => {
                const item = document.createElement('div');
                item.className = 'parcela-item';
                item.onclick = () => toggleParcelaSelection(index);
                
                const statusClass = parcela.status === 'pago' ? 'installment-paid' : 
                                  parcela.status === 'pendente' ? 'installment-pending' : 'installment-overdue';
                
                item.innerHTML = `
                    <input type="checkbox" name="parcela" value="${index}">
                    <div class="parcela-info">
                        <div class="parcela-valor">Parcela ${parcela.number} - R$ ${parcela.value.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</div>
                        <div class="parcela-vencimento">Vencimento: ${parcela.dueDate} | Status: <span class="installment-status ${statusClass}">${parcela.status.toUpperCase()}</span></div>
                        ${parcela.paidDate ? `<div class="parcela-vencimento">Pago em: ${parcela.paidDate}</div>` : ''}
                    </div>
                `;
                parcelaList.appendChild(item);
            });
            
            document.getElementById('parcela-selection-modal').style.display = 'block';
        }

        function toggleParcelaSelection(index) {
            const item = document.querySelectorAll('.parcela-item')[index];
            const checkbox = item.querySelector('input[type="checkbox"]');
            
            if (checkbox.checked) {
                checkbox.checked = false;
                item.classList.remove('selected');
                selectedParcelas = selectedParcelas.filter(i => i !== index);
            } else {
                checkbox.checked = true;
                item.classList.add('selected');
                selectedParcelas.push(index);
            }
        }

        function proceedWithSelectedParcelas() {
            if (selectedParcelas.length === 0) {
                alert('Por favor, selecione pelo menos uma parcela.');
                return;
            }
            
            document.getElementById('parcela-selection-modal').style.display = 'none';
            
            if (currentAction === 'dar-baixa') {
                document.getElementById('security-modal').style.display = 'block';
            } else if (currentAction === 'renegociar') {
                showRenegotiationModal();
            } else if (currentAction === 'antecipar') {
                alert('Antecipação processada com sucesso!');
            }
        }

        // Mostrar histórico de movimentações
        function showMovementHistory() {
            document.getElementById('client-modal').style.display = 'none';
            document.getElementById('movement-history-modal').style.display = 'block';
        }

        // Mostrar modal de renegociação
        function showRenegotiationModal() {
            document.getElementById('renegociation-modal').style.display = 'block';
            calculateRenegotiation();
        }

        // Calcular renegociação
        function calculateRenegotiation() {
            const entradaValue = parseFloat(document.getElementById('entrada-value').value) || 0;
            const parcelasCount = parseInt(document.getElementById('parcelas-count').value);
            const valorTotal = 17250; // Valor com juros
            
            const valorRestante = valorTotal - entradaValue;
            const valorParcela = valorRestante / parcelasCount;
            
            document.getElementById('resumo-entrada').textContent = entradaValue.toLocaleString('pt-BR', {minimumFractionDigits: 2});
            document.getElementById('resumo-parcelas').textContent = `${parcelasCount}x de R$ ${valorParcela.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('resumo-total').textContent = valorTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2});
        }

        // Confirmar renegociação
        function confirmRenegotiation() {
            const entradaDate = document.getElementById('entrada-date').value;
            if (!entradaDate) {
                alert('Por favor, informe a data da entrada.');
                return;
            }
            
            document.getElementById('renegociation-modal').style.display = 'none';
            
            // Mostrar modal de boleto gerado
            document.getElementById('boleto-vencimento').textContent = entradaDate;
            document.getElementById('boleto-modal').style.display = 'block';
        }

        // Mostrar modal de contestação
        function showContestationModal() {
            document.getElementById('contestation-modal').style.display = 'block';
        }

        // Confirmar contestação
        function confirmContestation() {
            const reason = document.querySelector('input[name="contestation-reason"]:checked');
            if (!reason) {
                alert('Por favor, selecione um motivo para a contestação.');
                return;
            }
            
            alert('Contestação registrada com sucesso!');
            document.getElementById('contestation-modal').style.display = 'none';
        }

        // Confirmar segurança
        function confirmSecurity() {
            const password = document.getElementById('security-password').value;
            if (password.length < 1 || password.length > 6) {
                alert('A senha deve ter entre 1 e 6 caracteres.');
                return;
            }
            
            alert('Baixa realizada com sucesso!');
            document.getElementById('security-modal').style.display = 'none';
            
            // Limpar seleções
            selectedParcelas = [];
            selectedPurchase = null;
        }

        // Imprimir boleto
        function printBoleto() {
            window.print();
        }

        // Fechar modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            
            // Limpar seleções ao fechar modais
            if (modalId === 'purchase-selection-modal' || modalId === 'parcela-selection-modal') {
                selectedParcelas = [];
                selectedPurchase = null;
            }
        }

        // Desenhar gráficos
        function drawCharts() {
            // Gráfico de recebimentos mensais
            const monthlyCtx = document.getElementById('monthlyChart');
            if (monthlyCtx) {
                const ctx = monthlyCtx.getContext('2d');
                ctx.clearRect(0, 0, monthlyCtx.width, monthlyCtx.height);
                
                // Dados mockados
                const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'];
                const values = [45000, 52000, 48000, 61000, 55000, 67000];
                const maxValue = Math.max(...values);
                
                // Desenhar barras
                const barWidth = 50;
                const barSpacing = 60;
                const chartHeight = 150;
                
                ctx.fillStyle = '#3b82f6';
                values.forEach((value, index) => {
                    const barHeight = (value / maxValue) * chartHeight;
                    const x = index * barSpacing + 20;
                    const y = 170 - barHeight;
                    
                    ctx.fillRect(x, y, barWidth, barHeight);
                    
                    // Labels
                    ctx.fillStyle = '#64748b';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(months[index], x + barWidth/2, 190);
                    ctx.fillText('R$ ' + (value/1000) + 'k', x + barWidth/2, y - 5);
                    ctx.fillStyle = '#3b82f6';
                });
            }
            
            // Gráfico de status (pizza)
            const statusCtx = document.getElementById('statusChart');
            if (statusCtx) {
                const ctx = statusCtx.getContext('2d');
                ctx.clearRect(0, 0, statusCtx.width, statusCtx.height);
                
                const centerX = 200;
                const centerY = 100;
                const radius = 80;
                
                const data = [
                    { label: 'Em dia', value: 60, color: '#22c55e' },
                    { label: 'Atrasado', value: 25, color: '#f59e0b' },
                    { label: 'Inadimplente', value: 15, color: '#ef4444' }
                ];
                
                let currentAngle = 0;
                data.forEach(item => {
                    const sliceAngle = (item.value / 100) * 2 * Math.PI;
                    
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
                    ctx.closePath();
                    ctx.fillStyle = item.color;
                    ctx.fill();
                    
                    currentAngle += sliceAngle;
                });
                
                // Legenda
                let legendY = 20;
                data.forEach(item => {
                    ctx.fillStyle = item.color;
                    ctx.fillRect(320, legendY, 15, 15);
                    ctx.fillStyle = '#1e293b';
                    ctx.font = '12px Arial';
                    ctx.fillText(`${item.label}: ${item.value}%`, 340, legendY + 12);
                    legendY += 25;
                });
            }
            
            // Gráfico de linha (últimos 7 dias)
            const weeklyCtx = document.getElementById('weeklyChart');
            if (weeklyCtx) {
                const ctx = weeklyCtx.getContext('2d');
                ctx.clearRect(0, 0, weeklyCtx.width, weeklyCtx.height);
                
                const days = ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'];
                const values = [12000, 15000, 8000, 18000, 22000, 16000, 14000];
                const maxValue = Math.max(...values);
                
                const pointSpacing = 50;
                const chartHeight = 150;
                
                // Desenhar linha
                ctx.strokeStyle = '#8b5cf6';
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                values.forEach((value, index) => {
                    const x = index * pointSpacing + 30;
                    const y = 170 - (value / maxValue) * chartHeight;
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // Pontos
                    ctx.fillStyle = '#8b5cf6';
                    ctx.beginPath();
                    ctx.arc(x, y, 4, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // Labels
                    ctx.fillStyle = '#64748b';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(days[index], x, 190);
                });
                
                ctx.strokeStyle = '#8b5cf6';
                ctx.stroke();
            }
        }

        // Event listeners para fechar modais clicando fora
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
